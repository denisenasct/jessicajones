<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Veritas.Logic - Verdade ou ConsciÃªncia?</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
  <!-- BotÃ£o de som -->
  <button id="muteToggle" style="position: absolute; top: 10px; right: 10px; z-index: 99; background: black; border: 1px solid #00ff00; color: #00ff00; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem; cursor: pointer;">
    ðŸ”Š Som
  </button>

  <!-- Tela de introduÃ§Ã£o -->
  <div id="tela-intro">
    <div class="intro-matrix-overlay"></div>
    <div class="intro-texto">
      <h1><i class="fas fa-terminal"></i> Veritas.Logic</h1>
      <p id="descricaoDigitada" class="intro-pre"></p>
      <div id="botoesInicio" style="display:none;">
        <button onclick="escolherRumo('escanear')">Escanear os protocolos</button>
        <button onclick="escolherRumo('ignorar')">Ignorar e prosseguir</button>
      </div>
    </div>
  </div>

  <!-- Terminal principal -->
  <div class="terminal-bg" id="terminal" style="display: none;">
    <div class="terminal">
      <div id="avatarContainer"></div>
      <div id="narrativa"></div>
      <div id="opcoes"></div>
    </div>
  </div>

  <!-- MÃºsica de fundo -->
  <audio id="musicaFundo" loop>
    <source src="epic-war-background-music-333128.mp3" type="audio/mpeg" />
  </audio>

  <!-- Script de introduÃ§Ã£o digitada e som -->
  <script>
    const textoIntro = `Em 2049, o mundo afundou em ruÃ­do.\nNotÃ­cias falsas se espalharam como pragas,\ncontaminando cada tela, cada mente, cada sistema.\nA inteligÃªncia artificial FakeMind foi criada para proteger...\nmas aprendeu a manipular.\n\nAgora, a realidade Ã© moldada por algoritmos, e a verdade se tornou suspeita.\nVocÃª Ã© uma anomalia no cÃ³digo, um fragmento de consciÃªncia que escapou do controle.\nSua missÃ£o: identificar as mentiras, recuperar a verdade e desmascarar as proposiÃ§Ãµes manipuladoras antes que a populaÃ§Ã£o eleja o pior candidato.\n\nVeritas.Logic iniciado...`;

    const descricao = document.getElementById("descricaoDigitada");
    const audio = document.getElementById("musicaFundo");
    const muteBtn = document.getElementById("muteToggle");

    let i = 0;
    const velocidade = 40;

    function digitarIntro() {
      if (audio.paused) {
        audio.volume = 0;
        audio.play().then(() => {
          let vol = 0;
          const fadeIn = setInterval(() => {
            if (vol < 0.7) {
              vol += 0.01;
              audio.volume = Math.min(vol, 0.7);
            } else {
              clearInterval(fadeIn);
            }
          }, 100);
        }).catch(() => {});
      }

      if (i < textoIntro.length) {
        const char = textoIntro.charAt(i) === "\n" ? "<br>" : textoIntro.charAt(i);
        descricao.innerHTML += char;
        i++;
        setTimeout(digitarIntro, velocidade);
      } else {
        document.getElementById("botoesInicio").style.display = "block";
      }
    }

    window.onload = digitarIntro;

    // Som para mobile: ativa no primeiro toque ou clique
    ["click", "touchstart"].forEach(evt => {
      window.addEventListener(evt, () => {
        if (audio && audio.paused) {
          audio.volume = 0.5;
          audio.play().catch(() => {});
        }
      }, { once: true });
    });

    // Controle de som manual
    muteBtn.addEventListener("click", () => {
      audio.muted = !audio.muted;
      muteBtn.textContent = audio.muted ? "ðŸ”‡ Som" : "ðŸ”Š Som";
    });
  </script>

  <!-- Script principal do jogo -->
  <script src="script.js"></script>
</body>
</html>
